(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{299:function(t,n,e){"use strict";var o=e(4),v=e(20),r=e(29),_=e(185),c=e(85),l=e(12),f=e(84).f,h=e(128).f,d=e(13).f,m=e(303).trim,w=o.Number,x=w,$=w.prototype,y="Number"==r(e(127)($)),T="trim"in String.prototype,N=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){var e,o,v,r=(n=T?n.trim():m(n,3)).charCodeAt(0);if(43===r||45===r){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===r){switch(n.charCodeAt(1)){case 66:case 98:o=2,v=49;break;case 79:case 111:o=8,v=55;break;default:return+n}for(var code,_=n.slice(2),i=0,l=_.length;i<l;i++)if((code=_.charCodeAt(i))<48||code>v)return NaN;return parseInt(_,o)}}return+n};if(!w(" 0o1")||!w("0b1")||w("+0x1")){w=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof w&&(y?l(function(){$.valueOf.call(e)}):"Number"!=r(e))?_(new x(N(n)),e,w):N(n)};for(var S,E=e(7)?f(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;E.length>I;I++)v(x,S=E[I])&&!v(w,S)&&d(w,S,h(x,S));w.prototype=$,$.constructor=w,e(14)(o,"Number",w)}},303:function(t,n,e){var o=e(10),v=e(28),r=e(12),_=e(304),c="["+_+"]",l=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),h=function(t,n,e){var v={},c=r(function(){return!!_[t]()||"​"!="​"[t]()}),l=v[t]=c?n(d):_[t];e&&(v[e]=l),o(o.P+o.F*c,"String",v)},d=h.trim=function(t,n){return t=String(v(t)),1&n&&(t=t.replace(l,"")),2&n&&(t=t.replace(f,"")),t};t.exports=h},304:function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},314:function(t,n,e){"use strict";e.d(n,"d",function(){return o}),e.d(n,"a",function(){return v}),e.d(n,"e",function(){return r}),e.d(n,"c",function(){return _}),e.d(n,"b",function(){return c});e(38);var o=function(t,n){var e=n.slug;return t.$axios.$get("v1/tag/show",{params:{slug:e}})},v=function(t,n){var e=n.name,o=n.parent_slug;return t.$axios.$post("v1/tag/create",{name:e,parent_slug:o})},r=function(t,n){var e=n.name,o=n.slug,v=n.avatar,r=n.alias,_=n.intro;return t.$axios.$post("v1/tag/update",{name:e,slug:o,avatar:v,alias:r,intro:_})},_=function(t,n){var e=n.slug,o=n.target_slug;return t.$axios.$post("v1/tag/relink",{slug:e,target_slug:o})},c=function(t,n){var e=n.slug;return t.$axios.$post("v1/tag/delete",{slug:e})}},335:function(t,n,e){},336:function(t,n,e){},387:function(t,n,e){"use strict";var o=e(335);e.n(o).a},388:function(t,n,e){"use strict";var o=e(336);e.n(o).a},439:function(t,n,e){"use strict";e.r(n);var o=e(16),v=(e(38),e(314));e(299);function r(t,n){var e=n?"scrollTop":"scrollLeft",o=t[n?"pageYOffset":"pageXOffset"];return"number"!=typeof o&&(o=window.document.documentElement[e]),o}var _={name:"Affix",props:{top:{type:Number,default:0},bottom:{type:Number,default:void 0}},data:function(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType:function(){var t="top";return this.bottom>=0&&(t="bottom"),t},classes:function(){return[{"v-affix":this.affix}]}},mounted:function(){var t=this;this.$utils.on(window,"scroll",this.handleScroll),this.$utils.on(window,"resize",this.handleScroll),this.$nextTick(function(){t.handleScroll()})},beforeDestroy:function(){this.$utils.off(window,"scroll",this.handleScroll),this.$utils.off(window,"resize",this.handleScroll)},methods:{handleScroll:function(){var t=this.affix,n=r(window,!0),e=function(element){var rect=element.getBoundingClientRect(),t=r(window,!0),n=r(window),e=window.document.body,o=e.clientTop||0,v=e.clientLeft||0;return{top:rect.top+t-o,left:rect.left+n-v}}(this.$el),o=window.innerHeight,v=this.$el.getElementsByTagName("div")[0].offsetHeight;e.top-this.top<n&&"top"===this.offsetType&&!t?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:"".concat(this.top,"px"),left:"".concat(e.left,"px"),width:"".concat(this.$el.offsetWidth,"px")},this.$emit("on-change",!0)):e.top-this.top>n&&"top"===this.offsetType&&t&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),e.top+this.bottom+v>n+o&&"bottom"===this.offsetType&&!t?(this.affix=!0,this.styles={bottom:"".concat(this.bottom,"px"),left:"".concat(e.left,"px"),width:"".concat(this.$el.offsetWidth,"px")},this.$emit("on-change",!0)):e.top+this.bottom+v<n+o&&"bottom"===this.offsetType&&t&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}},c=(e(387),e(26)),l={name:"TagShow",components:{Affix:Object(c.a)(_,function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("div",{ref:"point",class:this.classes,style:this.styles},[this._t("default")],2),this._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:this.slot,expression:"slot"}],style:this.slotStyle})])},[],!1,null,null,null).exports},head:function(){var t=this.tag;return{title:t.name,meta:[{hid:"keywords",name:"keywords",content:"".concat(t.alias,",").concat("C站,calibur,咔哩吧,ACG,二次元,社区")},{hid:"description",name:"description",content:"".concat(t.name,",").concat(t.intro,",").concat("咔哩吧是一个二次元社区")}]}},props:{slug:{type:String,required:!0}},data:function(){return{tag:null,parent:null,children:[]}},computed:{},watch:{},asyncData:function(t){var n=t.app,e=t.error,r=t.params;return v.d(n,{slug:r.slug}).then(function(data){return Object(o.a)({},data)}).catch(e)},layout:"web",created:function(){},mounted:function(){},methods:{createTag:function(){var t=this;this.$prompt("请输入标签名","创建标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(function(n){var e=n.value.trim();if(e.length>32)return t.$toast.error("名字不能超过32个字");v.a(t,{name:e,parent_slug:t.slug}).then(function(data){t.children.push(data),t.$toast.success("标签创建成功")}).catch(function(n){t.$toast.error(n.message)})}).catch(function(){})},combineTag:function(){console.log("combineTag")},deleteTag:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","删除标签",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){v.b(t,{slug:t.slug}).then(function(){t.$toast.success("标签删除成功").then(function(){window.location.reload()})}).catch(function(n){t.$toast.error(n.message)})}).catch(function(){})},relinkTag:function(){var t=this;this.$prompt("请输入目标父节点id","移动标签",{confirmButtonText:"提交",cancelButtonText:"取消",inputPattern:/^[a-z0-9]+$/i,inputErrorMessage:"格式不正确"}).then(function(n){var e=n.value;v.c(t,{slug:t.slug,target_slug:e}).then(function(){t.$toast.success("标签移动成功")}).catch(function(n){t.$toast.error(n.message)})}).catch(function(){})},updateTag:function(){var t=this;this.$prompt("请输入标签名","更新标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(function(n){var e=n.value.trim();if(e.length>32)return t.$toast.error("名字不能超过32个字");v.e(t,{name:e,slug:t.slug,avatar:""}).then(function(){t.$toast.success("标签更新成功")}).catch(function(n){t.$toast.error(n.message)})}).catch(function(){})}}},f=(e(388),Object(c.a)(l,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"tag-show"}},[e("el-row",{staticClass:"container"},[e("el-col",{staticClass:"left-aside",attrs:{span:5}},[e("affix",{attrs:{top:50}},[t.parent?e("ul",{staticClass:"parent-node"},[e("li",{staticClass:"node"},[e("nuxt-link",{attrs:{to:"/tag/"+t.parent.slug}},[e("img",{attrs:{src:t.$resize(t.parent.avatar,{width:32}),alt:t.parent.name}}),t._v(" "),e("span",{domProps:{textContent:t._s(t.parent.name)}})])],1)]):t._e(),t._v(" "),t.children.length?e("ul",{staticClass:"child-node"},t._l(t.children.slice(0,10),function(n){return e("li",{key:n.slug,staticClass:"node"},[e("nuxt-link",{attrs:{to:"/tag/"+n.slug}},[e("img",{attrs:{src:t.$resize(n.avatar,{width:32}),alt:n.name}}),t._v(" "),e("span",{domProps:{textContent:t._s(n.name)}})])],1)}),0):t._e()])],1),t._v(" "),e("el-col",{staticClass:"main-wrap",attrs:{span:14}},[e("p",[t._v("当前标签")]),t._v("\n      "+t._s(t.tag.name)+"\n      "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")]),t._v(" "),e("p",[t._v("123")])]),t._v(" "),e("el-col",{attrs:{span:5}},[e("affix",{attrs:{top:50}},[e("div",[t._v("\n          当前标签活跃用户\n        ")]),t._v(" "),e("div",[e("button",{on:{click:t.createTag}},[t._v("\n            添加子标签\n          ")]),t._v(" "),e("button",{on:{click:t.combineTag}},[t._v("\n            合并标签\n          ")]),t._v(" "),e("button",{on:{click:t.deleteTag}},[t._v("\n            删除标签\n          ")]),t._v(" "),e("button",{on:{click:t.relinkTag}},[t._v("\n            修改父节点\n          ")]),t._v(" "),e("nuxt-link",{attrs:{to:t.$alias.tag(t.slug,"edit")}},[e("button",[t._v("\n              更新标签\n            ")])])],1)])],1)],1)],1)},[],!1,null,null,null));n.default=f.exports}}]);