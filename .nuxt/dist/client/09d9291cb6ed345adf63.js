(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{276:function(t,e,r){"use strict";var n=r(33),o=r(44),c=r(7),l=r(161),f=r(278);n(n.P+n.R,"Promise",{finally:function(t){var e=l(this,o.Promise||c.Promise),r="function"==typeof t;return this.then(r?function(r){return f(e,t()).then((function(){return r}))}:t,r?function(r){return f(e,t()).then((function(){throw r}))}:t)}})},278:function(t,e,r){var n=r(5),o=r(14),c=r(279);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=c.f(t);return(0,r.resolve)(e),r.promise}},279:function(t,e,r){"use strict";var n=r(79);function o(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new o(t)}},380:function(t,e,r){},517:function(t,e,r){"use strict";var n=r(380);r.n(n).a},628:function(t,e,r){"use strict";r.r(e);r(118),r(41),r(13),r(276);var n=r(47);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var c={name:"BangumiTrial",layout:"app",data:()=>({loading:!1}),computed:{query(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(source,!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.$route.query,{$axios:this.$axios,status:0})}},methods:{handleDelete(t){this.$confirm("删除后不可恢复，确认要删除吗？","提示").then(()=>{this.loading||(this.loading=!0,this.$axios.$post("v1/join/delete",{id:t}).then(()=>{this.$toast.success("删除成功"),this.$refs.loader.delete(t)}).catch(t=>{this.$toast.error(t.message)}).finally(()=>{this.loading=!1}))}).catch(()=>{})},handlePass(t){this.loading||(this.loading=!0,this.$axios.$post("v1/join/recommend",{id:t}).then(()=>{this.$toast.success("入库成功"),this.$refs.loader.delete(t)}).catch(t=>{this.$toast.error(t.message)}).finally(()=>{this.loading=!1}))},checkIsSelected(t,e,r){var n=t.answers||{},o=!1;return Object.keys(n).forEach(t=>{t.toString()!==r.toString()||o||(o=n[t]===e)}),o}},head:{title:"审核题目"}},l=(r(517),r(9)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"bangumi-trial"}},[r("FlowLoader",{ref:"loader",attrs:{func:"getBangumiQuestionTrials",type:"page",query:t.query},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow,o=e.extra;return r("div",{},t._l(n,(function(e){return r("div",{key:e.id,staticClass:"trial-item"},[r("p",{staticClass:"question",domProps:{innerHTML:t._s(e.title)}}),t._v(" "),r("ol",{staticClass:"answers"},t._l(e.answers,(function(n,c){return r("li",{key:c,class:{"is-selected":t.checkIsSelected(o,c,e.id)}},[r("span",{domProps:{innerHTML:t._s(n)}})])})),0),t._v(" "),r("div",{staticClass:"controls"},[r("div",[r("span",[t._v("用户：")]),t._v(" "),r("span",{domProps:{textContent:t._s(e.user.nickname)}})]),t._v(" "),r("div",[r("button",{on:{click:function(r){return t.handleDelete(e.id)}}},[t._v("拒绝")]),t._v(" "),r("button",{on:{click:function(r){return t.handlePass(e.id)}}},[t._v("通过")])])])])})),0)}},{key:"error",fn:function(e){var r=e.error;return[t._v("\n      "+t._s(r.message)+"\n    ")]}}])})],1)}),[],!1,null,null,null);e.default=component.exports}}]);