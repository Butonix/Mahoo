(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{295:function(t,v,n){"use strict";n.d(v,"d",function(){return _}),n.d(v,"a",function(){return e}),n.d(v,"e",function(){return r}),n.d(v,"c",function(){return o}),n.d(v,"b",function(){return c});n(37);var _=function(t,v){var n=v.slug;return t.$axios.$get("v1/tag/show",{params:{slug:n}})},e=function(t,v){var n=v.name,_=v.parent_slug;return t.$axios.$post("v1/tag/create",{name:n,parent_slug:_})},r=function(t,v){var n=v.name,_=v.slug,e=v.avatar,r=v.alias,o=v.intro;return t.$axios.$post("v1/tag/update",{name:n,slug:_,avatar:e,alias:r,intro:o})},o=function(t,v){var n=v.slug,_=v.target_slug;return t.$axios.$post("v1/tag/relink",{slug:n,target_slug:_})},c=function(t,v){var n=v.slug;return t.$axios.$post("v1/tag/delete",{slug:n})}},312:function(t,v,n){},347:function(t,v,n){"use strict";var _=n(312);n.n(_).a},370:function(t,v,n){"use strict";n.r(v);var _=n(14),e=(n(37),n(295)),r={name:"TagTree",components:{},head:function(){var t=this.tag;return{title:"".concat(t.name," - 咔哩吧"),meta:[{hid:"keywords",name:"keywords",content:"".concat(t.alias,",").concat("C站,calibur,咔哩吧,ACG,二次元,社区")}]}},props:{slug:{type:String,required:!0}},data:function(){return{tag:null,parent:null,children:[]}},computed:{},watch:{},asyncData:function(t){var v=t.app,n=t.error,r=t.params;return e.d(v,{slug:r.slug}).then(function(data){return Object(_.a)({},data)}).catch(n)},layout:"web",created:function(){},mounted:function(){},methods:{createTag:function(){var t=this;this.$prompt("请输入标签名","创建标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(function(v){var n=v.value.trim();if(n.length>32)return t.$toast.error("名字不能超过32个字");e.a(t,{name:n,parent_slug:t.slug}).then(function(data){t.children.push(data),t.$toast.success("标签创建成功")}).catch(function(v){t.$toast.error(v.message)})}).catch(function(){})},combineTag:function(){console.log("combineTag")},deleteTag:function(){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","删除标签",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.b(t,{slug:t.slug}).then(function(){t.$toast.success("标签删除成功").then(function(){window.location.reload()})}).catch(function(v){t.$toast.error(v.message)})}).catch(function(){})},relinkTag:function(){var t=this;this.$prompt("请输入目标父节点id","移动标签",{confirmButtonText:"提交",cancelButtonText:"取消",inputPattern:/^[a-z0-9]+$/i,inputErrorMessage:"格式不正确"}).then(function(v){var n=v.value;e.c(t,{slug:t.slug,target_slug:n}).then(function(){t.$toast.success("标签移动成功")}).catch(function(v){t.$toast.error(v.message)})}).catch(function(){})},updateTag:function(){var t=this;this.$prompt("请输入标签名","更新标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(function(v){var n=v.value.trim();if(n.length>32)return t.$toast.error("名字不能超过32个字");e.e(t,{name:n,slug:t.slug,avatar:""}).then(function(){t.$toast.success("标签更新成功")}).catch(function(v){t.$toast.error(v.message)})}).catch(function(){})}}},o=(n(347),n(25)),component=Object(o.a)(r,function(){var t=this,v=t.$createElement,n=t._self._c||v;return n("div",{attrs:{id:"tag-show"}},[n("el-row",{staticClass:"container"},[n("el-col",{staticClass:"left-aside",attrs:{span:5}},[t.parent?n("ul",{staticClass:"parent-node"},[n("li",{staticClass:"node"},[n("nuxt-link",{attrs:{to:"/tag/"+t.parent.slug}},[n("img",{attrs:{src:t.$resize(t.parent.avatar,{width:32}),alt:t.parent.name}}),t._v(" "),n("span",{domProps:{textContent:t._s(t.parent.name)}})])],1)]):t._e(),t._v(" "),t.children.length?n("ul",{staticClass:"child-node"},t._l(t.children.slice(0,10),function(v){return n("li",{key:v.slug,staticClass:"node"},[n("nuxt-link",{attrs:{to:"/tag/"+v.slug}},[n("img",{attrs:{src:t.$resize(v.avatar,{width:32}),alt:v.name}}),t._v(" "),n("span",{domProps:{textContent:t._s(v.name)}})])],1)}),0):t._e()]),t._v(" "),n("el-col",{staticClass:"main-wrap",attrs:{span:14}},[n("p",[t._v("当前标签")]),t._v("\n      "+t._s(t.tag.name)+"\n      "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")]),t._v(" "),n("p",[t._v("123")])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{staticClass:"panel"},[t._v("\n        当前标签活跃用户\n      ")]),t._v(" "),n("div",{staticClass:"panel"},[n("button",{on:{click:t.createTag}},[t._v("\n          添加子标签\n        ")]),t._v(" "),n("button",{on:{click:t.combineTag}},[t._v("\n          合并标签\n        ")]),t._v(" "),n("button",{on:{click:t.deleteTag}},[t._v("\n          删除标签\n        ")]),t._v(" "),n("button",{on:{click:t.relinkTag}},[t._v("\n          修改父节点\n        ")]),t._v(" "),n("nuxt-link",{attrs:{to:t.$alias.tag(t.slug,"edit")}},[n("button",[t._v("\n            更新标签\n          ")])])],1)])],1)],1)},[],!1,null,null,null);v.default=component.exports}}]);