(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{267:function(e,t,r){"use strict";r(64),r(62),r(36);var n=r(2),o=r(108);t.a={data:()=>({uploadHeaders:{key:"",token:""},uploadConfig:{max:5},uploadImageLimit:20,imageUploadAccept:["image/jpeg","image/png","image/jpg"].join(", "),imageUploadAction:"https://upload.qiniup.com",imagePrefix:"https://m1.calibur.tv/",getUpTokenTimer:0,uploadPending:0,uploadImageTotal:0,uploadImageList:[]}),computed:{currentUser(){return this.$store.state.user},isAuth(){return this.$store.state.isAuth}},watch:{isAuth(e){e&&this.initUpToken()}},mounted(){this.isAuth&&this.initUpToken()},beforeDestroy(){this.getUpTokenTimer&&clearInterval(this.getUpTokenTimer)},methods:{initUpToken(){this.getUpToken(),this.getUpTokenTimer=setInterval(()=>{this.getUpToken()},18e5)},getUpToken(){var e=this;return Object(n.a)(function*(){let t=e.$cookie.get("UPLOAD-TOKEN");t?e.uploadHeaders.token=e.$cookie.get("UPLOAD-TOKEN"):(t=yield Object(o.b)(e),e.uploadHeaders.token=t,e.$cookie.set("UPLOAD-TOKEN",t,{expires:new Date((new Date).getTime()+3e6)}))})()},handleImageUploadError(e,t){this.uploadImageList.forEach((r,n)=>{r.uid===t.uid&&(this.uploadPending--,this.uploadImageList.splice(n,1),console.log(e))}),this.$toast.error("图片：".concat(t.name," 上传失败"))},handleImageUploadRemove(e){this.uploadImageList.forEach((t,r)=>{t.uid===e.uid&&(this.uploadImageList.splice(r,1),this.uploadImageTotal--)})},handleImageUploadSuccess(e,t){this.uploadImageList.forEach((r,n)=>{r.uid===t.uid&&(this.uploadImageList[n]=Object.assign(r,{data:e.data,status:"success",url:this.$resize("".concat(this.imagePrefix).concat(e.data.url),{width:100})}))}),this.uploadImageTotal++,this.uploadPending--},handleImageUploadExceed(){this.$toast.info("最多还能上传".concat(this.uploadImageLimit-this.uploadImageTotal,"张图片"))},handleImageUploadBefore(e){if(!this.isAuth)return this.$channel.$emit("sign-in"),!1;if(-1===this.imageUploadAccept.split(", ").indexOf(e.type))return this.$toast.error("仅支持上传".concat(this.imageUploadAccept.replace(/image\//g,"").replace(/, /g,"、"),"格式的图片")),!1;if(this.uploadConfig.max&&this.uploadConfig.max<e.size/1024/1024)return this.$toast.error("图片大小不能超过 ".concat(this.uploadConfig.max,"MB!")),!1;return this.uploadHeaders.key=(e=>{let{slug:t,file:r}=e;return"".concat(t,"/").concat((new Date).getTime(),"-").concat(Math.random().toString(36).substring(3,6),".").concat(r.type.split("/").pop())})({slug:this.currentUser.slug,file:e}),this.uploadImageList.push({name:e.name,percentage:0,raw:e,size:e.size,status:"uploading",errMsg:"",uid:e.uid}),this.uploadPending++,!0}}}},284:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},r.p="/dist/",r(r.s=96)}({0:function(e,t,r){"use strict";function n(e,t,r,n,o,l,c,d){var f,m="function"==typeof e?e.options:e;if(t&&(m.render=t,m.staticRenderFns=r,m._compiled=!0),n&&(m.functional=!0),l&&(m._scopeId="data-v-"+l),c?(f=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},m._ssrRegister=f):o&&(f=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),f)if(m.functional){m._injectStyles=f;var h=m.render;m.render=function(e,t){return f.call(t),h(e,t)}}else{var v=m.beforeCreate;m.beforeCreate=v?[].concat(v,f):[f]}return{exports:e,options:m}}r.d(t,"a",function(){return n})},4:function(e,t){e.exports=r(35)},96:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:this.handleKeydown}},[this._t("default")],2)};n._withStripped=!0;var o=r(4),l=r.n(o),c=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),d={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[l.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",function(t){e.$emit("change",t)})},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,function(e){return e.checked})&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,r="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",n=this.$el.querySelectorAll(r),o=n.length,l=[].indexOf.call(n,t),d=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case c.LEFT:case c.UP:e.stopPropagation(),e.preventDefault(),0===l?(d[o-1].click(),d[o-1].focus()):(d[l-1].click(),d[l-1].focus());break;case c.RIGHT:case c.DOWN:l===o-1?(e.stopPropagation(),e.preventDefault(),d[0].click(),d[0].focus()):(d[l+1].click(),d[l+1].focus())}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},f=r(0),component=Object(f.a)(d,n,[],!1,null,null,null);component.options.__file="packages/radio/src/radio-group.vue";var m=component.exports;m.install=function(e){e.component(m.name,m)};t.default=m}})},285:function(e,t,r){},323:function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},r.p="/dist/",r(r.s=130)}({130:function(e,t,r){"use strict";r.r(t);var main={functional:!0,name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}},render:function(e,t){var r=t.slots(),n=t.props,o=n.direction,l=n.contentPosition;return e("div",{class:["el-divider","el-divider--"+o]},[r.default&&"vertical"!==o?e("div",{class:["el-divider__text","is-"+l]},[r.default]):null])},install:function(e){e.component(main.name,main)}};t.default=main}})},324:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},r.p="/dist/",r(r.s=52)}({0:function(e,t,r){"use strict";function n(e,t,r,n,o,l,c,d){var f,m="function"==typeof e?e.options:e;if(t&&(m.render=t,m.staticRenderFns=r,m._compiled=!0),n&&(m.functional=!0),l&&(m._scopeId="data-v-"+l),c?(f=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(c)},m._ssrRegister=f):o&&(f=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),f)if(m.functional){m._injectStyles=f;var h=m.render;m.render=function(e,t){return f.call(t),h(e,t)}}else{var v=m.beforeCreate;m.beforeCreate=v?[].concat(v,f):[f]}return{exports:e,options:m}}r.d(t,"a",function(){return n})},3:function(e,t){e.exports=r(37)},33:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[r("span",[e._v(e._s(e.currentLabel))])])],2)};n._withStripped=!0;var o=r(4),l=r.n(o),c=r(3),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f={mixins:[l.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var r=this.select,n=r.remote,o=r.valueKey;if(!this.created&&!n){if(o&&"object"===(void 0===e?"undefined":d(e))&&"object"===(void 0===t?"undefined":d(t))&&e[o]===t[o])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(a,b){if(this.isObject){var e=this.select.valueKey;return Object(c.getValueByPath)(a,e)===Object(c.getValueByPath)(b,e)}return a===b},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var r=this.select.valueKey;return e&&e.some(function(e){return Object(c.getValueByPath)(e,r)===Object(c.getValueByPath)(t,r)})}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(c.escapeRegexpString)(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){this.select.onOptionDestroy(this.select.options.indexOf(this))}},m=r(0),component=Object(m.a)(f,n,[],!1,null,null,null);component.options.__file="packages/select/src/option.vue";t.a=component.exports},4:function(e,t){e.exports=r(35)},52:function(e,t,r){"use strict";r.r(t);var n=r(33);n.a.install=function(e){e.component(n.a.name,n.a)},t.default=n.a}})},329:function(e,t,r){"use strict";var n=r(285);r.n(n).a},404:function(e,t,r){"use strict";r.r(t);var n=r(323),o=r.n(n),l=r(324),c=r.n(l),d=r(319),f=r.n(d),m=r(320),h=r.n(m),v=r(284),_=r.n(v),y=r(276),x=r.n(y),O=r(277),I=r.n(O),S=r(267),w={name:"CreateCosplay",layout:"web",components:{"el-upload":I.a,"el-radio":x.a,"el-radio-group":_.a,"el-cascader":h.a,"el-select":f.a,"el-option":c.a,"el-divider":o.a},mixins:[S.a],props:{tags:{type:Array,required:!0}},data:()=>({contentType:1,users:{coser:[],dresser:[],worker:[],ender:[],weapon:[]},formItem:{title:"",is_secret:0,textarea:"",area:[],tags:[]},cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}]}),computed:{},watch:{},created(){},mounted(){},methods:{handleSubmit(){},customImageUploadSuccess(e,t){this.handleImageUploadSuccess(e,t),this.uploadImageList=this.uploadImageList.filter(e=>"success"===e.status&&e.data.width>=420&&e.data.height>=420||"success"!==e.status),this.uploadImageTotal=this.uploadImageList.length}}},k=(r(329),r(18)),component=Object(k.a)(w,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"create-cosplay"}},[r("el-form",{ref:"form",attrs:{model:e.formItem,"label-position":"right","label-width":"80px"}},[r("p",{staticClass:"form-tip"},[e._v("\n      提示：标记 "),r("span",[e._v("*")]),e._v(" 为必填项，否则无法发布哦\n    ")]),e._v(" "),r("el-form-item",{attrs:{label:"上传图片",required:""}}),e._v(" "),r("div",{staticClass:"uploader",class:"uploader-count-"+(e.uploadImageTotal+e.uploadPending)},[r("el-upload",{attrs:{multiple:"",drag:"","list-type":"picture-card",action:e.imageUploadAction,limit:e.uploadImageLimit,data:e.uploadHeaders,"file-list":e.uploadImageList,accept:e.imageUploadAccept,"before-upload":e.handleImageUploadBefore,"on-success":e.customImageUploadSuccess,"on-error":e.handleImageUploadError,"on-remove":e.handleImageUploadRemove,"on-exceed":e.handleImageUploadExceed}}),e._v(" "),r("p",{staticClass:"uploader-info"},[e._v("\n        最多可上传20张哦 (支持格式 jpg、png，宽高尺寸须大于420像素)\n      ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"分区",required:""}},[r("el-col",{attrs:{span:16}},[r("el-cascader",{attrs:{placeholder:"添加作品分区，如约会大作战",options:e.tags,filterable:""},model:{value:e.formItem.area,callback:function(t){e.$set(e.formItem,"area",t)},expression:"formItem.area"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"标题",required:""}},[r("el-col",{attrs:{span:16}},[r("el-input",{attrs:{placeholder:"请输入标题","show-word-limit":!0,maxlength:"20"},model:{value:e.formItem.title,callback:function(t){e.$set(e.formItem,"title",t)},expression:"formItem.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{attrs:{type:"textarea","show-word-limit":!0,rows:8,maxlength:"233",resize:"none",placeholder:"请输入作品介绍，临摹作品请一定要注明作品的出处来源"},model:{value:e.formItem.textarea,callback:function(t){e.$set(e.formItem,"textarea",t)},expression:"formItem.textarea"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"标签"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"添加标签，方便分享",filterable:"",multiple:"","allow-create":""},model:{value:e.formItem.tags,callback:function(t){e.$set(e.formItem,"tags",t)},expression:"formItem.tags"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"访问权限"}},[r("el-radio-group",{model:{value:e.formItem.is_secret,callback:function(t){e.$set(e.formItem,"is_secret",t)},expression:"formItem.is_secret"}},[r("el-radio",{attrs:{label:0}},[e._v("\n          公开\n        ")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("\n          私密\n        ")])],1)],1),e._v(" "),r("br"),e._v(" "),r("el-divider",[e._v("创作者信息")]),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"出镜"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"coser的昵称",filterable:"",multiple:"","allow-create":""},model:{value:e.users.coser,callback:function(t){e.$set(e.users,"coser",t)},expression:"users.coser"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"化妆"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"化妆师的昵称",filterable:"",multiple:"","allow-create":""},model:{value:e.users.dresser,callback:function(t){e.$set(e.users,"dresser",t)},expression:"users.dresser"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"道具"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"道具师的昵称",filterable:"",multiple:"","allow-create":""},model:{value:e.users.weapon,callback:function(t){e.$set(e.users,"weapon",t)},expression:"users.weapon"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"摄影"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"摄影师的昵称",filterable:"",multiple:"","allow-create":""},model:{value:e.users.worker,callback:function(t){e.$set(e.users,"worker",t)},expression:"users.worker"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"后期"}},[r("el-col",{attrs:{span:16}},[r("el-select",{attrs:{placeholder:"后期君的昵称",filterable:"",multiple:"","allow-create":""},model:{value:e.users.ender,callback:function(t){e.$set(e.users,"ender",t)},expression:"users.ender"}},e._l(e.cityList,function(t){return r("el-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10,push:7}},[r("br"),e._v(" "),r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",shape:"circle",size:"large"},on:{click:e.handleSubmit}},[e._v("\n        提交发布\n      ")])],1)],1)],1)},[],!1,null,null,null);t.default=component.exports}}]);