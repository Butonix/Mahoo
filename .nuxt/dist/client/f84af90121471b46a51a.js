(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{295:function(t,e,n){"use strict";var r=n(106),c={name:"CreateTagBtn",props:{text:{type:String,default:"分区"},parent:{type:String,required:!0}},methods:{actionCreate(){this.$prompt("请输入".concat(this.text,"名"),"新建".concat(this.text),{confirmButtonText:"提交",cancelButtonText:"取消"}).then(t=>{let{value:e}=t;const n=e.trim();if(n.length>32)return this.$toast.error("名字不能超过32个字");Object(r.b)(this,{name:n,parent_slug:this.parent}).then(data=>{this.$emit("create",data)}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})}}},o=n(11),component=Object(o.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("button",{attrs:{type:"button"},on:{click:this.actionCreate}},[e("i",{staticClass:"el-icon-folder-add"}),this._v(" "),e("span",[this._v("新建"+this._s(this.text))])])},[],!1,null,null,null);e.a=component.exports},358:function(t,e,n){},359:function(t,e,n){},444:function(t,e,n){"use strict";var r=n(358);n.n(r).a},445:function(t,e,n){"use strict";var r=n(359);n.n(r).a},497:function(t,e,n){"use strict";n.r(e);var r=n(7),c=n(106),o=n(309),l=n(295),h=n(308),d={name:"JoinCard",props:{tag:{type:Object,required:!0}},data:()=>({}),computed:{},watch:{},created(){},mounted(){},methods:{}},m=(n(444),n(11)),f=Object(m.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"join-card"},[e("VImg",{staticClass:"poster",attrs:{src:this.tag.avatar,width:"250",height:"150"}})],1)},[],!1,null,null,null).exports,v={name:"TagShow",components:{Affix:o.a,joinCard:f,CreateTagBtn:l.a,PinFlowList:h.a},head(){const{tag:t}=this;return{title:t.name,meta:[{hid:"keywords",name:"keywords",content:t.alias},{hid:"description",name:"description",content:"".concat(t.name,",").concat(t.intro)}]}},props:{slug:{type:String,required:!0}},data:()=>({tag:null,parent:null,children:[]}),computed:{},watch:{},asyncData(t){let{app:e,error:n,params:o}=t;return c.e(e,o).then(data=>Object(r.a)({},data)).catch(n)},layout:"web",created(){},mounted(){},beforeMount(){this.patchTag()},methods:{patchTag(){this.$axios.$get("v1/tag/patch",{params:{slug:this.slug}}).then(data=>{this.tag=this.$set(this,"tag",Object.assign(this.tag,data))}).catch(()=>{})},handleCreate(data){this.children.push(data),this.$toast.success("标签创建成功")},combineTag(){console.log("combineTag")},deleteTag(){this.$confirm("此操作将永久删除该文件, 是否继续?","删除标签").then(()=>{c.c(this,{slug:this.slug}).then(()=>{this.$toast.success("标签删除成功").then(()=>{window.location.reload()})}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})},relinkTag(){this.$prompt("请输入目标父节点id","移动标签",{confirmButtonText:"提交",cancelButtonText:"取消",inputPattern:/^[a-z0-9]+$/i,inputErrorMessage:"格式不正确"}).then(t=>{let{value:e}=t;c.d(this,{slug:this.slug,target_slug:e}).then(()=>{this.$toast.success("标签移动成功")}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})},updateTag(){this.$prompt("请输入标签名","更新标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(t=>{let{value:e}=t;const n=e.trim();if(n.length>32)return this.$toast.error("名字不能超过32个字");c.f(this,{name:n,slug:this.slug,avatar:""}).then(()=>{this.$toast.success("标签更新成功")}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})}}},w=(n(445),Object(m.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tag-show"}},[n("ElRow",{staticClass:"container"},[n("ElCol",{attrs:{span:5}},[n("Affix",{staticClass:"left-aside",attrs:{top:50}},[n("joinCard",{attrs:{tag:t.tag}}),t._v(" "),t.children.length?n("ul",{staticClass:"child-node"},t._l(t.children.slice(0,10),function(e){return n("li",{key:e.slug,staticClass:"node"},[n("NLink",{attrs:{to:"/tag/"+e.slug}},[n("VImg",{attrs:{src:e.avatar,width:"32",height:"32",alt:e.name}}),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})],1)],1)}),0):t._e()],1)],1),t._v(" "),n("ElCol",{staticClass:"main-wrap",attrs:{span:14}},[n("PinFlowList",{attrs:{slug:t.slug,"show-area":!1}})],1),t._v(" "),n("ElCol",{attrs:{span:5}})],1)],1)},[],!1,null,null,null));e.default=w.exports}}]);