/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{294:function(t,e,n){"use strict";var r=n(4),o=n(20),l=n(27),c=n(181),d=n(83),f=n(11),m=n(84).f,h=n(127).f,v=n(13).f,_=n(300).trim,C=r.Number,x=C,y=C.prototype,w="Number"==l(n(126)(y)),$="trim"in String.prototype,k=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,l=(e=$?e.trim():_(e,3)).charCodeAt(0);if(43===l||45===l){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var code,c=e.slice(2),i=0,f=c.length;i<f;i++)if((code=c.charCodeAt(i))<48||code>o)return NaN;return parseInt(c,r)}}return+e};if(!C(" 0o1")||!C("0b1")||C("+0x1")){C=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof C&&(w?f(function(){y.valueOf.call(n)}):"Number"!=l(n))?c(new x(k(e)),n,C):k(e)};for(var j,M=n(7)?m(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;M.length>O;O++)o(x,j=M[O])&&!o(C,j)&&v(C,j,h(x,j));C.prototype=y,y.constructor=C,n(14)(r,"Number",C)}},295:function(t,e,n){},296:function(t,e,n){},297:function(t,e,n){"use strict";n(36);var r=n(3),o=n(52);e.a={beforeMount:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$store.state.logging){t.next=4;break}e=this.$watch("$store.state.logging",function(){r.$store.state.isAuth?e():r.$toast.error("继续操作前请先登录").then(function(){window.location.href="/"})}),t.next=10;break;case 4:return n=Object(o.a)(),this.$store.commit("SET_USER_TOKEN",n),t.next=8,this.$store.dispatch("initAuth");case 8:t.sent||this.$toast.error("继续操作前请先登录").then(function(){window.location.href="/"});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},300:function(t,e,n){var r=n(9),o=n(26),l=n(11),c=n(301),d="["+c+"]",f=RegExp("^"+d+d+"*"),m=RegExp(d+d+"*$"),h=function(t,e,n){var o={},d=l(function(){return!!c[t]()||"​"!="​"[t]()}),f=o[t]=d?e(v):c[t];n&&(o[n]=f),r(r.P+r.F*d,"String",o)},v=h.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(f,"")),2&e&&(t=t.replace(m,"")),t};t.exports=h},301:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},302:function(t,e,n){"use strict";n(37),n(79);e.a={beforeMount:function(){var t=this,e=this.$watch("isAuth",function(n){n&&(t.$store.getters.isMine(t.$route.params.slug)||t.$router.replace({name:t.$route.name,params:{slug:t.$store.state.user.slug}}),e())})}}},305:function(t,e,n){"use strict";n(294);var r={name:"UserAvatar",props:{user:{type:Object,required:!0},avatar:{type:String,default:""},size:{type:Number,default:40},disabled:{type:Boolean,default:!1}}},o=(n(318),n(25)),component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.disabled?n("div",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"}},[n("img",{staticClass:"avatar",attrs:{src:t.$resize(t.avatar||t.user.avatar,{width:t.size}),alt:t.user.nickname}})]):n("nuxt-link",{staticClass:"user-avatar",style:{width:t.size+"px",height:t.size+"px"},attrs:{to:t.$alias.user(t.user.slug)}},[n("img",{staticClass:"avatar",attrs:{src:t.$resize(t.avatar||t.user.avatar,{width:t.size}),alt:t.user.nickname}})])},[],!1,null,null,null);e.a=component.exports},318:function(t,e,n){"use strict";var r=n(295);n.n(r).a},319:function(t,e,n){"use strict";var r=n(296);n.n(r).a},322:function(t,e,n){},323:function(t,e,n){},324:function(t,e,n){},325:function(t,e,n){},326:function(t,e,n){},327:function(t,e,n){},328:function(t,e,n){},329:function(t,e,n){},330:function(t,e,n){},331:function(t,e,n){},345:function(t,e,n){"use strict";n(294);var r={name:"UserNickname",props:{user:{type:Object,required:!0},sex:{type:Number,default:0},level:{type:Boolean,default:!0},nickname:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{sexClass:function(){switch(this.sex){case-1:return{name:"simi",color:"limegreen"};case 0:return{name:"unknown",color:"gold"};case 1:return{name:"nan",color:"deepskyblue"};case 2:return{name:"nv",color:"hotpink"};default:return{name:"weizhi",color:"gold"}}}}},o=(n(319),n(25)),component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clearfix"},[t.disabled?n("div",{staticClass:"user-nickname"},[n("div",{staticClass:"nickname"},[n("p",{staticClass:"oneline",domProps:{textContent:t._s(t.nickname||t.user.nickname)}})]),t._v(" "),t.sex?n("span",{staticClass:"title"},[n("i",{staticClass:"iconfont ic-sex",class:"ic-"+t.sexClass.name,style:{backgroundColor:t.sexClass.color}})]):t._e(),t._v(" "),t.level?n("span",{staticClass:"title ic-level",domProps:{textContent:t._s("Lv"+t.user.level)}}):t._e(),t._v(" "),t._l(t.user.roles,function(e,r){return n("span",{key:r,staticClass:"title ic-title",domProps:{textContent:t._s(e)}})})],2):n("nuxt-link",{staticClass:"user-nickname",attrs:{to:t.$alias.user(t.user.slug)}},[n("div",{staticClass:"nickname"},[n("p",{staticClass:"oneline",domProps:{textContent:t._s(t.nickname||t.user.nickname)}})]),t._v(" "),t.sex?n("span",{staticClass:"title"},[n("i",{staticClass:"iconfont ic-sex",class:"ic-"+t.sexClass.name,style:{backgroundColor:t.sexClass.color}})]):t._e(),t._v(" "),t.level?n("span",{staticClass:"title ic-level",domProps:{textContent:t._s("Lv"+t.user.level)}}):t._e(),t._v(" "),t._l(t.user.title,function(e,r){return n("span",{key:r,staticClass:"title ic-title",domProps:{textContent:t._s(e)}})})],2)],1)},[],!1,null,null,null);e.a=component.exports},369:function(t,e,n){t.exports=n.p+"img/e82d3e7.png"},370:function(t,e,n){"use strict";var r=n(322);n.n(r).a},371:function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"09b1":function(t,e,n){"use strict";var r=n("b242"),s=n.n(r);s.a},5870:function(t,e,n){},"7f7f":function(t,e,n){"use strict";var r=n("5870"),s=n.n(r);s.a},9520:function(t,e,n){"use strict";var r=n("da2c"),s=n.n(r);s.a},b242:function(t,e,n){},da2c:function(t,e,n){},f6fd:function(t,e){!function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})}(document)},fb15:function(t,e,n){"use strict";var r;n.r(e),"undefined"!=typeof window&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));var o={name:"LoadingMsg"};function l(t,e,n,r,s,i,o,a){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}n("7f7f");var p=l(o,function(){var t=this;return t.$createElement,t._self._c,t._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-msg"},[e("i",{staticClass:"dot"}),e("i",{staticClass:"dot"}),e("i",{staticClass:"dot"})])}],!1,null,null,null),c=p.exports,g={name:"MsgBubble",components:{LoadingMsg:c},props:{color:{type:Object,required:!0},float:{type:String,required:!0,validator:function(t){return~["left","right"].indexOf(t)}},loading:{type:Boolean,required:!0},status:{type:String,required:!0}},computed:{wrapperStyle:function(){return{backgroundColor:this.color.bg,color:this.color.text}}}},d=g,f=(n("9520"),l(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg-box",class:"msg-box-"+t.float},[n("div",{staticClass:"msg-avatar"},[t._t("avatar")],2),n("div",{staticClass:"msg-body"},[t._t("header"),n("div",{staticClass:"msg-bubble",style:t.wrapperStyle},[t.loading?t._t("loading",[n("loading-msg")]):t._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._t("default"),t.status?n("i",{staticClass:"msg-status",class:"msg-status-"+t.status}):t._e()],2)],2),t._t("footer")],2)])},[],!1,null,null,null)),m=f.exports,h={name:"TextMsg",props:{item:{type:Object,required:!0}}},v=h,_=l(v,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"text-msg",domProps:{textContent:t._s(t.item.content)}})},[],!1,null,null,null),C=_.exports,x={name:"ChatRoom",components:{Bubble:m},props:{avatarComponent:{type:Object,default:null},loadingComponent:{type:Object,default:null},messageComponents:{type:Object,default:function(){}},widgetComponents:{type:Object,default:function(){}},headerComponents:{type:Object,default:function(){}},footerComponents:{type:Object,default:function(){}},colors:{type:Array,default:function(){return[{bg:"#12b7f5",text:"#fff"},{bg:"#ff8eb3",text:"#fff"}]}}},data:function(){return{list:[],last_pending_id:0,resolver:null}},computed:{msgTypes:function(){return Object.assign({"text-msg":C},this.messageComponents)}},methods:{addMessage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.type||"text-msg",r=t.id||Math.random().toString(10).substring(3,6),s=t.footer||"",i=t.header||"",o=t.loading||!1,a=t.pending||!1,l={id:r,isBubble:!0,message:this.msgTypes[n],header:i?this.headerComponents[i]:null,footer:s?this.footerComponents[s]:null,float:t.float||"left",color:this._computeBubbleColor(t),loading:o,status:t.status||"",item:t.data,next:null};e?this.list.push(l):this.list.unshift(l),o||a||this._handleResolve(t.data),a&&(this.last_pending_id=r,this._setResolve())},addWidget:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.type||"divide-line",r=t.id||Math.random().toString(10).substring(3,6),s={id:r,isBubble:!1,message:this.widgetComponents[n],item:t.data};e?this.list.push(s):this.list.unshift(s)},updateMessage:function(t,e){for(var n=this,r=function(r){if(n.list[r].id===t)return Object.keys(e).forEach(function(t){n.list[r][t]=e[t]}),"break"},s=this.list.length-1;s>=0;s--){var i=r(s);if("break"===i)break}},_setResolve:function(){var t=this;setTimeout(function(){t.last_pending_id&&t.list.forEach(function(e,n){e.id===t.last_pending_id&&(t.list[n].next=new Promise(function(e){t.resolver=e}))})},0)},_handleResolve:function(t){this.last_pending_id&&(this.resolver(t),this._setResolve())},_handleMsgLoaded:function(t){this.list[t].loading=!1,this.list[t].next||this._handleResolve(this.list[t].item)},_handleMsgResolve:function(t){this.last_pending_id===t&&(this.last_pending_id=0,this.resolver=null)},_computeBubbleColor:function(t){return t.color?t.color:t.data&&t.data.user&&t.data.user.id?this.colors[t.data.user.id%this.colors.length]:this.colors[t.id%this.colors.length]}}},y=x,w=(n("09b1"),l(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{staticClass:"chat-room",attrs:{tag:"div",name:"msg-fade"}},[t._l(t.list,function(e,r){return[e.isBubble?n("Bubble",{key:r+"-"+e.id,attrs:{color:e.color,status:e.status,loading:e.loading,float:e.float}},[t.avatarComponent&&e.item.user?n(t.avatarComponent,{tag:"component",attrs:{slot:"avatar",item:e.item.user},slot:"avatar"}):t._e(),e.header&&e.item.user?n(e.header,{tag:"component",attrs:{slot:"header",item:e.item.user},slot:"header"}):t._e(),t.loadingComponent?n(t.loadingComponent,{tag:"component",attrs:{slot:"loading"},slot:"loading"}):t._e(),n(e.message,{key:e.id,tag:"component",attrs:{item:e.item,next:e.next},on:{loaded:function(e){return t._handleMsgLoaded(r)},resolve:function(n){return t._handleMsgResolve(e.id)}}}),e.footer?n(e.footer,{tag:"component",attrs:{slot:"footer",item:e.item},slot:"footer"}):t._e()],1):n(e.message,{key:e.id,tag:"component",attrs:{item:e.item}})]})],2)},[],!1,null,null,null)),$=w.exports;e.default=$}}).default},372:function(t,e,n){},373:function(t,e,n){"use strict";var r=n(323);n.n(r).a},374:function(t,e,n){"use strict";var r=n(324);n.n(r).a},375:function(t,e,n){"use strict";var r=n(325);n.n(r).a},376:function(t,e,n){"use strict";var r=n(326);n.n(r).a},377:function(t,e,n){"use strict";var r=n(327);n.n(r).a},378:function(t,e,n){"use strict";var r=n(328);n.n(r).a},379:function(t,e,n){"use strict";var r=n(329);n.n(r).a},380:function(t,e,n){"use strict";var r=n(330);n.n(r).a},381:function(t,e,n){"use strict";var r=n(331);n.n(r).a},401:function(t,e,n){"use strict";n.r(e);var r={name:"MessageMenu",data:function(){return{watcher:null,menu:[]}},mounted:function(){var t=this;this.watcher=this.$watch("$store.state.mailbox.unread_message_total",function(e,n){e>n&&t.getMessageMenu()}),this.getMessageMenu()},beforeDestroy:function(){this.watcher&&this.watcher()},methods:{getMessageMenu:function(){var t=this;this.$axios.$get("v1/message/menu").then(function(data){t.menu=data})}}},o=(n(370),n(25)),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"message-menu"},t._l(t.menu,function(e){return n("li",{key:e.channel},[t._v("\n    "+t._s(e.channel)+"\n    "),t._v(" "),n("div",{staticClass:"close"},[t._v("\n      ×\n    ")])])}),0)},[],!1,null,null,null).exports,c=(n(123),n(124),n(12),n(371)),d=n.n(c),f=(n(372),n(305)),m={name:"ChatAvatar",components:{UserAvatar:f.a},props:{item:{type:Object,required:!0}},computed:{isMine:function(){return this.$store.state.user.slug===this.item.slug}}},h=(n(373),Object(o.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-avatar",class:[this.isMine?"chat-avatar-mine":"chat-avatar-other"]},[e("user-avatar",{attrs:{user:this.item,size:36}})],1)},[],!1,null,null,null).exports),v={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},_=(n(374),Object(o.a)(v,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[e("p",{domProps:{innerHTML:this._s(this.item.content.replace(/\r?\n/g,"<br>"))}})])},[],!1,null,null,null).exports),C={name:"JsonContentImgParser",props:{item:{type:Object,required:!0}}},x=(n(375),Object(o.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-content-img-parser"},[n("img",{attrs:{src:t.$resize(t.item.url),width:t.item.width,height:t.item.height,alt:t.item.text}}),t._v(" "),t.item.text?n("p",{staticClass:"img-tip",domProps:{textContent:t._s(t.item.text)}}):t._e()])},[],!1,null,null,null).exports),y={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},w=(n(376),Object(o.a)(y,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[e("blockquote",{domProps:{innerHTML:this._s(this.item.text)}})])},[],!1,null,null,null).exports),$={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},k=(n(377),Object(o.a)($,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[this.item.text?e("h3",{domProps:{textContent:this._s(this.item.text)}}):this._e()])},[],!1,null,null,null).exports),j=(n(80),n(79),{name:"JsonContentListParser",props:{item:{type:Object,required:!0}},computed:{list:function(){var t=this.item.text;if(!t)return[];for(;/\n\n/.test(t);)t=t.replace(/\n\n/g,"\n");return t.split("\n")}}}),M=(n(378),{name:"JsonContent",components:{TitleParser:k,TxtParser:_,ImgParser:x,UseParser:w,ListParser:Object(o.a)(j,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-content-list-parser"},["1"===t.item.sort?n("ol",t._l(t.list,function(li,e){return n("li",{key:e,domProps:{textContent:t._s(li)}})}),0):n("ul",t._l(t.list,function(li,e){return n("li",{key:e,domProps:{textContent:t._s(li)}})}),0)])},[],!1,null,null,null).exports},props:{content:{required:!0,type:Array},show:{type:Boolean,default:!0}}}),O={name:"ChatMessage",components:{JsonContent:Object(o.a)(M,function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",{staticClass:"json-content"},this._l(this.content,function(t,n){return e(t.type+"-parser",{key:n,tag:"component",attrs:{item:t}})}),1):this._e()},[],!1,null,null,null).exports},props:{item:{type:Object,required:!0}}},E=(n(379),Object(o.a)(O,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-message"},[e("json-content",{attrs:{content:this.item.content}})],1)},[],!1,null,null,null).exports),P=n(345),S={name:"MessageRoom",components:{ChatRoom:d.a,UserAvatar:f.a,UserNickname:P.a},props:{mailto:{type:String,required:!0},slug:{type:String,required:!0}},data:function(){return{message:"",target:null}},computed:{query:function(){return{channel:this.mailto,$axios:this.$axios}},avatarComp:function(){return h},messageComps:function(){return{message:E}},computeHelperTxt:function(){return"undefined"==typeof window?"":/windows/.test(window.navigator.userAgent.toLocaleLowerCase())?"按下Ctrl+Enter换行":"按下Cmd+Enter换行"}},methods:{handleMessageLoad:function(t){var e=this,data=t.data,n=t.args;this.$nextTick(function(){0===n.is_up&&data.result.map(function(t){e.appendMessage(t)})})},appendMessage:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$refs.room.addMessage({id:t.id,type:"message",float:t.user.slug===this.slug?"right":"left",color:2===t.user.sex?{bg:"#ff6881",text:"#fff"}:{bg:"#12b7f5",text:"#fff"},data:t},e)},handleAddBubble:function(){var t=this;if(this.message.trim()){var e=[{type:"txt",content:this.message.trim()}],n=Math.random().toString(10).substring(3,6);this.appendMessage({id:n,user:this.$store.state.user,content:e,created_at:Date.now()}),this.message="",this.$axios.$post("v1/message/send",{message_type:1,getter_slug:this.mailto,content:e}).then(function(e){t.$refs.room.updateMessage(n,{id:e.id}),t.$refs.loader.append(e)}).catch(function(){t.$refs.room.updateMessage(n,{status:"error"})})}},handleNewLine:function(){this.message&&(this.message+="\n")}}},N=(n(380),Object(o.a)(S,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room"},[n("div",{staticClass:"room-header"},[t.target?n("user-avatar",{attrs:{user:t.target,size:36}}):t._e(),t._v(" "),t.target?n("user-nickname",{staticClass:"nickname-wrap",attrs:{user:t.target}}):t._e()],1),t._v(" "),n("no-ssr",[n("flow-loader",{ref:"loader",staticClass:"room-body",attrs:{func:"getUserMessage",type:"sinceId",query:t.query,callback:t.handleMessageLoad,"cache-timeout":864e5}},[n("div",{staticClass:"room-chats"},[n("ChatRoom",{ref:"room",attrs:{"avatar-component":t.avatarComp,"message-components":t.messageComps}})],1)])],1),t._v(" "),n("div",{staticClass:"room-footer"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{maxlength:"500",placeholder:"say it..."},domProps:{value:t.message},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.handleAddBubble(e))},function(e){return e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.handleAddBubble(e)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?(e.preventDefault(),t.handleNewLine(e)):null}],input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),n("div",{staticClass:"helper"},[n("span",{domProps:{textContent:t._s(t.computeHelperTxt)}}),t._v(" "),n("button",{on:{click:t.handleAddBubble}},[t._v("\n        发送\n      ")])])])],1)},[],!1,null,null,null).exports),T=n(302),A={name:"UserMessage",components:{MessageMenu:l,MessageRoom:N},mixins:[n(297).a,T.a],props:{slug:{type:String,required:!0}},computed:{mailto:function(){return this.$route.query.mailto}}},R=(n(381),Object(o.a)(A,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"user-message"}},[e("el-row",{staticClass:"column-wrap"},[e("el-col",{attrs:{span:6}},[e("message-menu"),this._v("\n       \n    ")],1),this._v(" "),e("el-col",{attrs:{span:18}},[e("div",{staticClass:"room-adjust"},[this.mailto?e("message-room",{attrs:{mailto:this.mailto,slug:this.slug}}):e("div",{staticClass:"need-pick"},[e("img",{attrs:{src:n(369)}}),this._v(" "),e("p",[this._v("未选择聊天")])])],1)])],1)],1)},[],!1,null,null,null));e.default=R.exports}}]);