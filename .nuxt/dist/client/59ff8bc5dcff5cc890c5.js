(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{257:function(t,v,_){"use strict";_.d(v,"d",function(){return e}),_.d(v,"a",function(){return n}),_.d(v,"e",function(){return r}),_.d(v,"c",function(){return o}),_.d(v,"b",function(){return c});const e=(t,v)=>{let{slug:_}=v;return t.$axios.$get("v1/tag/show",{params:{slug:_}})},n=(t,v)=>{let{name:_,parent_slug:e}=v;return t.$axios.$post("v1/tag/create",{name:_,parent_slug:e})},r=(t,v)=>{let{name:_,slug:e,avatar:n,alias:r,intro:o}=v;return t.$axios.$post("v1/tag/update",{name:_,slug:e,avatar:n,alias:r,intro:o})},o=(t,v)=>{let{slug:_,target_slug:e}=v;return t.$axios.$post("v1/tag/relink",{slug:_,target_slug:e})},c=(t,v)=>{let{slug:_}=v;return t.$axios.$post("v1/tag/delete",{slug:_})}},273:function(t,v,_){},322:function(t,v,_){"use strict";var e=_(273);_.n(e).a},380:function(t,v,_){"use strict";_.r(v);var e=_(7),n=_(257),r={name:"TagShow",components:{},head(){const{tag:t}=this;return{title:t.name,meta:[{hid:"keywords",name:"keywords",content:"".concat(t.alias,",").concat("C站,calibur,咔哩吧,ACG,二次元,社区")},{hid:"description",name:"description",content:"".concat(t.name,",").concat(t.intro,",").concat("咔哩吧是一个二次元社区")}]}},props:{slug:{type:String,required:!0}},data:()=>({tag:null,parent:null,children:[]}),computed:{},watch:{},asyncData(t){let{app:v,error:_,params:r}=t;return n.d(v,{slug:r.slug}).then(data=>Object(e.a)({},data)).catch(_)},layout:"web",created(){},mounted(){},methods:{createTag(){this.$prompt("请输入标签名","创建标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(t=>{let{value:v}=t;const _=v.trim();if(_.length>32)return this.$toast.error("名字不能超过32个字");n.a(this,{name:_,parent_slug:this.slug}).then(data=>{this.children.push(data),this.$toast.success("标签创建成功")}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})},combineTag(){console.log("combineTag")},deleteTag(){this.$confirm("此操作将永久删除该文件, 是否继续?","删除标签",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{n.b(this,{slug:this.slug}).then(()=>{this.$toast.success("标签删除成功").then(()=>{window.location.reload()})}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})},relinkTag(){this.$prompt("请输入目标父节点id","移动标签",{confirmButtonText:"提交",cancelButtonText:"取消",inputPattern:/^[a-z0-9]+$/i,inputErrorMessage:"格式不正确"}).then(t=>{let{value:v}=t;n.c(this,{slug:this.slug,target_slug:v}).then(()=>{this.$toast.success("标签移动成功")}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})},updateTag(){this.$prompt("请输入标签名","更新标签",{confirmButtonText:"提交",cancelButtonText:"取消"}).then(t=>{let{value:v}=t;const _=v.trim();if(_.length>32)return this.$toast.error("名字不能超过32个字");n.e(this,{name:_,slug:this.slug,avatar:""}).then(()=>{this.$toast.success("标签更新成功")}).catch(t=>{this.$toast.error(t.message)})}).catch(()=>{})}}},o=(_(322),_(17)),component=Object(o.a)(r,function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("div",{attrs:{id:"tag-show"}},[_("el-row",{staticClass:"container"},[_("el-col",{staticClass:"left-aside",attrs:{span:5}},[t.parent?_("ul",{staticClass:"parent-node"},[_("li",{staticClass:"node"},[_("nuxt-link",{attrs:{to:"/tag/"+t.parent.slug}},[_("img",{attrs:{src:t.$resize(t.parent.avatar,{width:32}),alt:t.parent.name}}),t._v(" "),_("span",{domProps:{textContent:t._s(t.parent.name)}})])],1)]):t._e(),t._v(" "),t.children.length?_("ul",{staticClass:"child-node"},t._l(t.children.slice(0,10),function(v){return _("li",{key:v.slug,staticClass:"node"},[_("nuxt-link",{attrs:{to:"/tag/"+v.slug}},[_("img",{attrs:{src:t.$resize(v.avatar,{width:32}),alt:v.name}}),t._v(" "),_("span",{domProps:{textContent:t._s(v.name)}})])],1)}),0):t._e()]),t._v(" "),_("el-col",{staticClass:"main-wrap",attrs:{span:14}},[_("p",[t._v("当前标签")]),t._v("\n      "+t._s(t.tag.name)+"\n      "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")]),t._v(" "),_("p",[t._v("123")])]),t._v(" "),_("el-col",{attrs:{span:5}},[_("div",{staticClass:"panel"},[t._v("\n        当前标签活跃用户\n      ")]),t._v(" "),_("div",{staticClass:"panel"},[_("button",{on:{click:t.createTag}},[t._v("\n          添加子标签\n        ")]),t._v(" "),_("button",{on:{click:t.combineTag}},[t._v("\n          合并标签\n        ")]),t._v(" "),_("button",{on:{click:t.deleteTag}},[t._v("\n          删除标签\n        ")]),t._v(" "),_("button",{on:{click:t.relinkTag}},[t._v("\n          修改父节点\n        ")]),t._v(" "),_("nuxt-link",{attrs:{to:t.$alias.tag(t.slug,"edit")}},[_("button",[t._v("\n            更新标签\n          ")])])],1)])],1)],1)},[],!1,null,null,null);v.default=component.exports}}]);