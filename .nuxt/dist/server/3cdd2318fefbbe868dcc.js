exports.ids=[13],exports.modules={207:function(t,e){},281:function(t,e,l){"use strict";l.r(e);var n=l(207),r=l.n(n);for(var o in n)"default"!==o&&function(t){l.d(e,t,function(){return n[t]})}(o);e.default=r.a},297:function(t,e,l){"use strict";l.r(e);var n=l(57),r=l.n(n),o=l(58),h=l.n(o),c=l(56),m=l.n(c),f=l(22);var d=l(88),v={name:"TagQA",layout:"web",components:{ElAlert:m.a,ElRadio:h.a,ElRadioGroup:r.a},mixins:[d.a],props:{slug:{type:String,required:!0}},data:()=>({tag:null,children:[],submitting:!1,title:"",answers:[{value:"",key:0},{value:"",key:1},{value:"",key:2},{value:"",key:3}],rightOpt:-1,rule:null,info:null}),asyncData:({app:t,error:e,params:l})=>Object(f.d)(t,l).then(data=>data).catch(e),mounted(){this.getRule(),this.getInfo()},methods:{getRule(){this.$axios.$get("v1/atfield/rule/show",{params:{slug:this.tag.slug}}).then(data=>{this.rule=data}).catch()},getInfo(){this.$axios.$get("v1/tag/atfield",{params:{slug:this.tag.slug}}).then(data=>{this.info=data}).catch()},submit(){this.title.trim()?this.answers.map(t=>t.value).filter(t=>t).length<2?this.$toast.info("至少要有2个选项"):-1!==this.rightOpt?this.answers.filter(t=>t.key===this.rightOpt)[0].value.trim()?(this.submitting=!0,((t,{tag_slug:e,title:title,answers:l,right_index:n})=>t.$axios.$post("v1/atfield/create",{tag_slug:e,title:title,answers:l,right_index:n}))(this,{title:this.title,answers:this.answers.map(t=>t.value).filter(t=>t),right_index:this.rightOpt,tag_slug:this.slug}).then(()=>{this.$toast.success("提交成功").then(()=>{window.location.reload()})}).catch(t=>{this.$toast.error(t.message),this.submitting=!1})):this.$toast.info("正确选项不能为空"):this.$toast.info("请选择正确选项"):this.$toast.info("题目不能为空")}}},_=l(2);var component=Object(_.a)(v,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{attrs:{id:"tag-qa"}},[l("ElRow",[l("ElCol",{attrs:{span:12,offset:6}},[l("ElForm",{ref:"form",attrs:{disabled:t.submitting,"label-position":"right","label-width":"80px"}},[l("ElFormItem",[l("h1",[t._v("为《"+t._s(t.tag.name)+"》出题")]),t._v(" "),l("br"),t._v(" "),t.rule?l("ElAlert",{attrs:{description:"当前分区需要有「"+t.rule.question_count+"道」题入库之后才能开放加入",title:"当前分区答题规则",type:"success"}}):t._e()],1),t._v(" "),l("ElFormItem",[t.info?l("ElAlert",{attrs:{description:"当前分区有「"+t.info.trial+"道」题正在审核中，「"+t.info.pass+"道」题已入库",title:"当前分区题库信息",type:"success"}}):t._e()],1),t._v(" "),l("ElFormItem",{attrs:{label:"题目"}},[l("ElInput",{attrs:{rows:2,type:"textarea",placeholder:"请输入题目",resize:"none",maxlength:"50","show-word-limit":""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),l("ElFormItem",[l("p",{staticClass:"form-tip"},[t._v("\n            提示：选项至少提供两个，至多四个\n          ")])]),t._v(" "),t._l(t.answers,function(e,n){return l("ElFormItem",{key:e.key,attrs:{label:"选项"+(n+1)}},[l("ElInput",{attrs:{placeholder:"请输入答案（20字以内）",maxlength:"20"},model:{value:e.value,callback:function(l){t.$set(e,"value",l)},expression:"item.value"}})],1)}),t._v(" "),l("ElFormItem",[l("p",{staticClass:"form-tip"},[t._v("\n            提示：题目为单选题，正确选项不能为空\n          ")])]),t._v(" "),l("ElFormItem",{attrs:{label:"答案"}},[l("ElRadioGroup",{model:{value:t.rightOpt,callback:function(e){t.rightOpt=e},expression:"rightOpt"}},t._l(t.answers,function(e,n){return l("ElRadio",{key:e.key,attrs:{label:e.key}},[t._v("\n              答案"+t._s(n+1)+"\n            ")])}),1)],1),t._v(" "),l("ElFormItem",[l("ElButton",{attrs:{loading:t.submitting,type:"success",round:""},on:{click:t.submit}},[t._v("\n            提交\n          ")])],1)],2)],1)],1)],1)},[],!1,function(t){var e=l(281);e.__inject__&&e.__inject__(t)},null,"1f614f64");e.default=component.exports},88:function(t,e,l){"use strict";e.a={beforeMount(){this.$channel.$when("user-not-sign",()=>{this.$toast.error("继续操作前请先登录").then(()=>{window.location.href=this.$alias.sign()})})}}}};
//# sourceMappingURL=3cdd2318fefbbe868dcc.js.map