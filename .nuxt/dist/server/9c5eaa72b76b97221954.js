exports.ids=[1],exports.modules={117:function(t,e,n){"use strict";var o=n(26);e.a={async beforeMount(){if(this.$store.state.logging){const t=this.$watch("$store.state.logging",()=>{this.$store.state.isAuth?(this.$channel.$fire("user-signed"),t()):(this.$cookie.remove("JWT-TOKEN"),this.$channel.$fire("user-not-sign"))})}else{const t=Object(o.a)();this.$store.commit("SET_USER_TOKEN",t),await this.$store.dispatch("initAuth")?(this.$channel.$fire("user-signed"),this.$store.dispatch("getUserRoles")):(this.$cookie.remove("JWT-TOKEN"),this.$channel.$fire("user-not-sign"))}}}},245:function(t,e,n){"use strict";e.a={beforeMount(){this.$channel.$when("user-signed",()=>{const t=()=>Date.now()-this.$cache.get("socket-connect-heartbeat",0)<=1e3;setTimeout(()=>{const e=()=>{this.$channel.socketConnect();const t=setInterval(()=>{this.$store.state.socket.isConnected?this.$cache.set("socket-connect-heartbeat",Date.now()):clearInterval(t)},1e3);window.addEventListener("beforeunload",()=>{this.$channel.socketDisconnect()})},n=()=>{const n=setInterval(()=>{t()?Date.now()-this.$cache.get("socket-on-message-time",0)<=1e3&&this.$store.commit("SOCKET_ONMESSAGE",this.$cache.get("socket-on-message-data")):"visible"===document.visibilityState&&(e(),clearInterval(n))},2e3)};t()||"visible"!==document.visibilityState?(this.$store.commit("SOCKET_AUTO_CONNECT"),n()):e()},2e3)})},beforeDestroy(){this.$store.state.socket.isConnected&&this.$channel.socketDisconnect()}}},246:function(t,e){},341:function(t,e,n){"use strict";n.r(e);var o=n(246),c=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e.default=c.a},383:function(t,e,n){"use strict";n.r(e);var o=n(117),c=n(245),r={name:"AppLayout",mixins:[o.a,c.a],beforeMount(){this.$channel.$when("user-not-sign",()=>{this.$router.replace(`/app/sign?redirect=${encodeURIComponent("/app/found")}`)})}},l=n(1);var component=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app-layout"}},[n("nuxt",{staticClass:"main-view"}),t._ssrNode(" "),t._ssrNode('<div id="main-tab">',"</div>",[t._ssrNode('<div class="tab-core">',"</div>",[n("NLink",{staticClass:"link-0",attrs:{to:"/app/found",replace:""}},[n("i",{staticClass:"iconfont"}),t._v(" "),n("span",[t._v("发现")])]),t._ssrNode(" "),n("NLink",{staticClass:"link-1",attrs:{to:"/app/category",replace:""}},[n("i",{staticClass:"iconfont"}),t._v(" "),n("span",[t._v("分类")])]),t._ssrNode(" "),n("NLink",{attrs:{to:"/app/write"}},[n("span",[t._v("+")])]),t._ssrNode(" "),n("NLink",{staticClass:"link-2",attrs:{to:"/app/notice",replace:""}},[n("i",{staticClass:"iconfont"}),t._v(" "),n("span",[t._v("消息")])]),t._ssrNode(" "),n("NLink",{staticClass:"link-3",attrs:{to:"/app/home",replace:""}},[n("i",{staticClass:"iconfont"}),t._v(" "),n("span",[t._v("我的")])])],2)])],2)},[],!1,function(t){var e=n(341);e.__inject__&&e.__inject__(t)},null,"20d0d05c");e.default=component.exports}};
//# sourceMappingURL=9c5eaa72b76b97221954.js.map