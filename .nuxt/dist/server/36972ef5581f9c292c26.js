exports.ids=[9],exports.modules={122:function(e,t){},183:function(e,t,n){"use strict";n.r(t);var r=n(122),c=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=c.a},184:function(e,t){},266:function(e,t,n){"use strict";var r=n(65),c=n.n(r),o=n(27),l={name:"MessageMenu",props:{slug:{type:String,required:!0}},data:()=>({menuWatcher:null,timeWatcher:null,friends:[]}),computed:{menu(){return this.$store.state.messageMenu.list}},mounted(){this.menuWatcher=this.$watch("$store.state.mailbox.unread_message_total",(e,t)=>{e>t&&!this.$store.state.socket.isConnected&&this.$store.dispatch("getMessageMenu")}),this.timeWatcher=this.$watch("$store.state.messageMenu.time",()=>{this.$store.dispatch("updateMessageMenu")}),this.$store.dispatch("updateMessageMenu"),this.menu.length&&this.$store.state.socket.isConnected||this.initChatRoom()},beforeDestroy(){this.menuWatcher&&this.menuWatcher(),this.timeWatcher&&this.timeWatcher()},methods:{async initChatRoom(){const e=c.a.service({target:this.$el});await this.getUserFriends(),await this.$store.dispatch("getMessageMenu"),e.close()},async getUserFriends(){const e=()=>{Object(o.getUserRelation)({$axios:this.$axios,slug:this.slug,relation:"friend"}).then(data=>{data.result.forEach(e=>this.$cache.setUserSessionStore(e)),this.friends=data.result,sessionStorage.setItem("user-friends-list",JSON.stringify(data.result))})};try{const t=sessionStorage.getItem("user-friends-list");if(!t)return void await e();const n=JSON.parse(t);n.forEach(e=>this.$cache.setUserSessionStore(e)),this.friends=n}catch(t){await e()}},deleteChannel(e){this.$axios.$post("v1/message/delete_channel",{channel:e.channel}).then(()=>{this.$store.commit("DELETE_MESSAGE_MENU",e.channel)}).catch(()=>{})},emitClick(e){this.$emit("open",e)}}},h=n(1);var component=Object(h.a)(l,function(){var e=this,t=e.$createElement;return(e._self._c||t)("ul",{staticClass:"message-menu"},[e._ssrNode(e._ssrList(e.menu,function(t){return'<li><div class="room-item clearfix">'+(t.user.avatar?"<img"+e._ssrAttr("src",e.$resize(t.user.avatar,{width:42}))+e._ssrAttr("alt",t.user.nickname)+' class="avatar">':"\x3c!----\x3e")+' <div class="content"><p class="nickname oneline">'+e._s(t.user.nickname)+'</p> <div class="footer">'+(t.count?'<div class="read-badge">'+e._ssrEscape(e._s(t.count))+"</div>":"\x3c!----\x3e")+'</div></div></div> <div class="close">\n      ×\n    </div></li>'}))])},[],!1,function(e){var t=n(183);t.__inject__&&t.__inject__(e)},null,"5992dbf6");t.a=component.exports},289:function(e,t,n){"use strict";n.r(t);var r=n(184),c=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t.default=c.a},394:function(e,t,n){"use strict";n.r(t);var r={name:"AppNotice",layout:"app",components:{MessageMenu:n(266).a},props:{},data:()=>({}),computed:{slug(){return this.$store.state.user.slug}},watch:{},created(){},mounted(){},methods:{}},c=n(1);var component=Object(c.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app-notice"}},[this._ssrNode('<div class="msg-panel clearfix"><div><i class="iconfont ic-message_fill"></i> <span>回复我的</span></div> <div><i class="iconfont ic-eit"></i> <span>@我</span></div> <div><i class="iconfont ic-good_fill"></i> <span>收到的赞</span></div> <div><i class="iconfont ic-notice_fill"></i> <span>系统通知</span></div></div> '),this.slug?t("MessageMenu",{attrs:{slug:this.slug}}):this._e()],2)},[],!1,function(e){var t=n(289);t.__inject__&&t.__inject__(e)},null,"8a77c3ec");t.default=component.exports}};
//# sourceMappingURL=36972ef5581f9c292c26.js.map