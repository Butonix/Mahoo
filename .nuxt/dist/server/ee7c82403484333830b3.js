exports.ids=[9],exports.modules={122:function(t,e){},186:function(t,e,n){"use strict";n.r(e);var r=n(122),c=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e.default=c.a},187:function(t,e){},269:function(t,e,n){"use strict";var r=n(65),c=n.n(r),o=n(26),l={name:"MessageMenu",props:{slug:{type:String,required:!0}},data:()=>({menuWatcher:null,timeWatcher:null,friends:[]}),computed:{menu(){return this.$store.state.messageMenu.list}},mounted(){this.menuWatcher=this.$watch("$store.state.mailbox.unread_message_total",(t,e)=>{t>e&&!this.$store.state.socket.isConnected&&this.$store.dispatch("getMessageMenu")}),this.timeWatcher=this.$watch("$store.state.messageMenu.time",()=>{this.$store.dispatch("updateMessageMenu")}),this.$store.dispatch("updateMessageMenu"),this.menu.length&&this.$store.state.socket.isConnected||this.initChatRoom()},beforeDestroy(){this.menuWatcher&&this.menuWatcher(),this.timeWatcher&&this.timeWatcher()},methods:{async initChatRoom(){const t=c.a.service({target:this.$el});await this.getUserFriends(),await this.$store.dispatch("getMessageMenu"),t.close()},async getUserFriends(){const t=()=>{Object(o.getUserRelation)({$axios:this.$axios,slug:this.slug,relation:"friend"}).then(data=>{data.result.forEach(t=>this.$cache.setUserSessionStore(t)),this.friends=data.result,sessionStorage.setItem("user-friends-list",JSON.stringify(data.result))})};try{const e=sessionStorage.getItem("user-friends-list");if(!e)return void await t();const n=JSON.parse(e);n.forEach(t=>this.$cache.setUserSessionStore(t)),this.friends=n}catch(e){await t()}},deleteChannel(t){this.$axios.$post("v1/message/delete_channel",{channel:t.channel}).then(()=>{this.$store.commit("DELETE_MESSAGE_MENU",t.channel)}).catch(()=>{})},emitClick(t){this.$emit("open",t)}}},h=n(1);var component=Object(h.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ul",{staticClass:"message-menu"},[t._ssrNode(t._ssrList(t.menu,(function(e){return'<li><div class="room-item clearfix">'+(e.user.avatar?"<img"+t._ssrAttr("src",t.$resize(e.user.avatar,{width:42}))+t._ssrAttr("alt",e.user.nickname)+' class="avatar">':"\x3c!----\x3e")+' <div class="content"><p class="nickname oneline">'+t._s(e.user.nickname)+'</p> <div class="footer">'+(e.count?'<div class="read-badge">'+t._ssrEscape(t._s(e.count))+"</div>":"\x3c!----\x3e")+'</div></div></div> <div class="close">\n      ×\n    </div></li>'})))])}),[],!1,(function(t){var e=n(186);e.__inject__&&e.__inject__(t)}),null,"5992dbf6");e.a=component.exports},295:function(t,e,n){"use strict";n.r(e);var r=n(187),c=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e.default=c.a},387:function(t,e,n){"use strict";n.r(e);var r={name:"AppNotice",layout:"app",components:{MessageMenu:n(269).a},props:{},data:()=>({}),computed:{slug(){return this.$store.state.user.slug}},watch:{},created(){},mounted(){},methods:{todo(){this.$toast.info("todo")}}},c=n(1);var component=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app-notice"}},[this._ssrNode('<div class="msg-panel clearfix"><div><p><i class="iconfont ic-message_fill"></i></p> <span>回复我的</span></div> <div><p><i class="iconfont ic-eit"></i></p> <span>@我</span></div> <div><p><i class="iconfont ic-good_fill"></i></p> <span>收到的赞</span></div> <div><p><i class="iconfont ic-notice_fill"></i></p> <span>系统通知</span></div></div> '),this.slug?e("MessageMenu",{attrs:{slug:this.slug}}):this._e()],2)}),[],!1,(function(t){var e=n(295);e.__inject__&&e.__inject__(t)}),null,"8a77c3ec");e.default=component.exports}};